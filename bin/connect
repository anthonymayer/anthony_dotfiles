#!/bin/sh

#default to '707cal'
if [ "$@" ]; then
	net="$@"
else
	net="707cal"
fi

#bring it down
if [ "$net" = "707cal" ]; then
	sudo ifdown eth1
else
	sudo dhclient -r eth1
fi

#set to correct ESSID
echo -n "Connecting to network \"$net\"."
while ! iwconfig eth1 | grep "$net"; do
	sudo iwconfig eth1 essid "$net"
	echo -n "."
	sleep 4
done
echo

#bring it up
if [ "$net" = "707cal" ]; then
	sudo ifup eth1
else
	sudo dhclient eth1
fi

