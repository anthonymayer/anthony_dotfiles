#!/bin/sh
wifi="eth1"

#default to '707cal'
if [ "$@" ]; then
	net="$@"
else
	net="707cal"
fi

#bring it down
if [ "$net" = "707cal" ]; then
	sudo ifdown $wifi
else
	sudo ifdown $wifi
fi

#set to correct ESSID
echo -n "Connecting to network \"$net\"."
while ! iwconfig $wifi | grep "$net"; do
	sudo iwconfig $wifi essid "$net"
	echo -n "."
	sleep 4
done
echo

#bring it up
if [ "$net" = "707cal" ]; then
#while route del defualt; do :; done
	sudo ifconfig $wifi 192.168.1.103
	sudo route add -net 192.168.1.0 netmask 255.255.255.0 dev $wifi
	sudo route add default gateway 192.168.1.1
else
	sudo ifup $wifi
fi

